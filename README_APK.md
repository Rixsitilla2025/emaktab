# Сборка APK для Emaktab Auto

## Быстрый старт

### 1. Установка зависимостей
```bash
./install_requirements.sh
```

### 2. Сборка APK
```bash
./build_apk.sh
```

## Требования

### Системные требования:
- **Python 3.7+**
- **Java JDK 8+** (обязательно!)
- **Git**
- **Cython**

### Установка Java (если не установлена):

**macOS:**
```bash
brew install openjdk@8
```

**Ubuntu/Debian:**
```bash
sudo apt update
sudo apt install openjdk-8-jdk
```

**Windows:**
- Скачайте JDK с [oracle.com](https://www.oracle.com/java/technologies/downloads/)
- Установите и добавьте в PATH

## Процесс сборки

1. **Автоматическая загрузка Android SDK** - Buildozer сам загрузит необходимые компоненты
2. **Компиляция Python кода** - Код будет скомпилирован в APK
3. **Создание APK файла** - Результат в папке `bin/`

## Результат

После успешной сборки вы получите:
- **Файл:** `bin/emaktabauto-1.0-debug.apk`
- **Размер:** ~15-25 MB
- **Архитектуры:** ARM64, ARMv7

## Установка на телефон

1. **Скопируйте APK** на телефон
2. **Включите "Установка из неизвестных источников"** в настройках безопасности
3. **Откройте APK файл** и установите

## Возможные проблемы

### Ошибка Java:
```
❌ Java не найдена
```
**Решение:** Установите Java JDK 8 или выше

### Ошибка памяти:
```
OutOfMemoryError
```
**Решение:** Увеличьте память для Java:
```bash
export JAVA_OPTS="-Xmx4g"
```

### Ошибка Android SDK:
```
Android SDK not found
```
**Решение:** Buildozer загрузит SDK автоматически при первой сборке

## Отладка

Для отладки на телефоне:
```bash
adb logcat | grep python
```

## Оптимизация

Для уменьшения размера APK:
- Удалите неиспользуемые библиотеки
- Используйте только нужные архитектуры в `buildozer.spec`
- Включите ProGuard для обфускации

## Поддержка

При возникновении проблем:
1. Проверьте логи сборки
2. Убедитесь в наличии всех зависимостей
3. Попробуйте очистить кэш: `buildozer android clean`
